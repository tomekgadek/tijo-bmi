<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{base.html :: head}"></head>

<body th:replace="~{base.html :: layout(~{::content})}">
    <div th:fragment="content">
        <div class="page-header">
            <h1>Społeczność</h1>
            <p class="page-subtitle">Przeglądaj profile innych użytkowników i czerp inspirację.</p>
        </div>

        <div th:if="${profiles != null and !profiles.empty}" class="pure-g">
            <div th:each="dto : ${profiles}" class="pure-u-1 pure-u-md-1-2 profile-grid-item">
                <div class="card profile-card-full">
                    <h3
                        th:text="${dto.user.firstName != null ? dto.user.firstName + ' ' + (dto.user.lastName != null ? dto.user.lastName : '') : dto.user.username}">
                        Imię Nazwisko</h3>

                    <div class="profile-card-content">
                        <p th:if="${dto.user.motivationalQuote != null and dto.user.motivationalQuote != ''}"
                            class="profile-quote">
                            <span th:text="${'&quot;' + dto.user.motivationalQuote + '&quot;'}"></span>
                        </p>

                        <div th:if="${dto.user.achievement != null and dto.user.achievement != ''}"
                            class="profile-achievement-section">
                            <strong class="achievement-label">Osiągnięcia:</strong>
                            <p class="achievement-text" th:text="${dto.user.achievement}"></p>
                        </div>
                    </div>

                    <div class="profile-stats">
                        <div class="pure-g profile-stats-grid">
                            <div class="pure-u-1-3">
                                <span class="profile-stat-label">Wzrost</span>
                                <div class="profile-stat-value"
                                    th:text="${dto.user.height != null ? dto.user.height + ' cm' : '-'}"></div>
                            </div>
                            <div class="pure-u-1-3">
                                <span class="profile-stat-label">Waga</span>
                                <div class="profile-stat-value"
                                    th:text="${dto.currentWeight != null ? dto.currentWeight + ' kg' : '-'}"></div>
                            </div>
                            <div class="pure-u-1-3">
                                <span class="profile-stat-label">BMI</span>
                                <div class="profile-stat-value-accent"
                                    th:text="${dto.currentBMI != null ? #numbers.formatDecimal(dto.currentBMI, 1, 1) : '-'}">
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center;">
                            <a th:href="@{/public/profile/{id}(id=${dto.user.id})}" class="pure-button profile-view-btn">Zobacz pełny profil</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div th:if="${profiles == null or profiles.empty}" class="card empty-state">
            <p class="page-subtitle">Brak publicznych profili.</p>
        </div>
    </div>
</body>

</html>
